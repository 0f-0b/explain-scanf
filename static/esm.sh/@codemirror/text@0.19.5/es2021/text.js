var m="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(s=>s?parseInt(s,36):1);for(let s=1;s<m.length;s++)m[s]+=m[s-1];function $(s){for(let e=1;e<m.length;e+=2)if(m[e]>s)return m[e-1]<=s;return!1}function y(s){return s>=127462&&s<=127487}var k=8205;function A(s,e,t=!0){return(t?M:D)(s,e)}function M(s,e){if(e==s.length)return e;e&&S(s.charCodeAt(e))&&j(s.charCodeAt(e-1))&&e--;let t=b(s,e);for(e+=q(t);e<s.length;){let n=b(s,e);if(t==k||n==k||$(n))e+=q(n),t=n;else if(y(n)){let i=0,l=e-2;for(;l>=0&&y(b(s,l));)i++,l-=2;if(i%2==0)break;e+=2}else break}return e}function D(s,e){for(;e>0;){let t=M(s,e-2);if(t<e)return t;e--}return 0}function S(s){return s>=56320&&s<57344}function j(s){return s>=55296&&s<56320}function b(s,e){let t=s.charCodeAt(e);if(!j(t)||e+1==s.length)return t;let n=s.charCodeAt(e+1);return S(n)?(t-55296<<10)+(n-56320)+65536:t}function z(s){return s<=65535?String.fromCharCode(s):(s-=65536,String.fromCharCode((s>>10)+55296,(s&1023)+56320))}function q(s){return s<65536?1:2}function J(s,e,t=s.length){let n=0;for(let i=0;i<t;)s.charCodeAt(i)==9?(n+=e-n%e,i++):(n++,i=A(s,i));return n}function O(s,e,t,n){for(let i=0,l=0;;){if(l>=e)return i;if(i==s.length)break;l+=s.charCodeAt(i)==9?t-l%t:1,i=A(s,i)}return n===!0?-1:s.length}var d=class{constructor(){}lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,n){let i=[];return this.decompose(0,e,i,2),n.length&&n.decompose(0,n.length,i,1|2),this.decompose(t,this.length,i,1),g.from(i,this.length-(t-e)+n.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){let n=[];return this.decompose(e,t,n,0),g.from(n,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),n=this.length-this.scanIdentical(e,-1),i=new x(this),l=new x(e);for(let r=t,u=t;;){if(i.next(r),l.next(r),r=0,i.lineBreak!=l.lineBreak||i.done!=l.done||i.value!=l.value)return!1;if(u+=i.value.length,i.done||u>=n)return!0}}iter(e=1){return new x(this,e)}iterRange(e,t=this.length){return new C(this,e,t)}iterLines(e,t){let n;if(e==null)n=this.iter();else{t==null&&(t=this.lines+1);let i=this.line(e).from;n=this.iterRange(i,Math.max(i,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new B(n)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?d.empty:e.length<=32?new a(e):g.from(a.split(e,[]))}},a=class extends d{constructor(e,t=P(e)){super();this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,n,i){for(let l=0;;l++){let r=this.text[l],u=i+r.length;if((t?n:u)>=e)return new R(i,u,n,r);i=u+1,n++}}decompose(e,t,n,i){let l=e<=0&&t>=this.length?this:new a(E(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(i&1){let r=n.pop(),u=w(l.text,r.text.slice(),0,l.length);if(u.length<=32)n.push(new a(u,r.length+l.length));else{let h=u.length>>1;n.push(new a(u.slice(0,h)),new a(u.slice(h)))}}else n.push(l)}replace(e,t,n){if(!(n instanceof a))return super.replace(e,t,n);let i=w(this.text,w(n.text,E(this.text,0,e)),t),l=this.length+n.length-(t-e);return i.length<=32?new a(i,l):g.from(a.split(i,[]),l)}sliceString(e,t=this.length,n=`
`){let i="";for(let l=0,r=0;l<=t&&r<this.text.length;r++){let u=this.text[r],h=l+u.length;l>e&&r&&(i+=n),e<h&&t>l&&(i+=u.slice(Math.max(0,e-l),t-l)),l=h+1}return i}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let n=[],i=-1;for(let l of e)n.push(l),i+=l.length+1,n.length==32&&(t.push(new a(n,i)),n=[],i=-1);return i>-1&&t.push(new a(n,i)),t}},g=class extends d{constructor(e,t){super();this.children=e,this.length=t,this.lines=0;for(let n of e)this.lines+=n.lines}lineInner(e,t,n,i){for(let l=0;;l++){let r=this.children[l],u=i+r.length,h=n+r.lines-1;if((t?h:u)>=e)return r.lineInner(e,t,n,i);i=u+1,n=h+1}}decompose(e,t,n,i){for(let l=0,r=0;r<=t&&l<this.children.length;l++){let u=this.children[l],h=r+u.length;if(e<=h&&t>=r){let o=i&((r<=e?1:0)|(h>=t?2:0));r>=e&&h<=t&&!o?n.push(u):u.decompose(e-r,t-r,n,o)}r=h+1}}replace(e,t,n){if(n.lines<this.lines)for(let i=0,l=0;i<this.children.length;i++){let r=this.children[i],u=l+r.length;if(e>=l&&t<=u){let h=r.replace(e-l,t-l,n),o=this.lines-r.lines+h.lines;if(h.lines<o>>5-1&&h.lines>o>>5+1){let c=this.children.slice();return c[i]=h,new g(c,this.length-(t-e)+n.length)}return super.replace(l,u,h)}l=u+1}return super.replace(e,t,n)}sliceString(e,t=this.length,n=`
`){let i="";for(let l=0,r=0;l<this.children.length&&r<=t;l++){let u=this.children[l],h=r+u.length;r>e&&l&&(i+=n),e<h&&t>r&&(i+=u.sliceString(e-r,t-r,n)),r=h+1}return i}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof g))return 0;let n=0,[i,l,r,u]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=t,l+=t){if(i==r||l==u)return n;let h=this.children[i],o=e.children[l];if(h!=o)return n+h.scanIdentical(o,t);n+=h.length+1}}static from(e,t=e.reduce((n,i)=>n+i.length+1,-1)){let n=0;for(let f of e)n+=f.lines;if(n<32){let f=[];for(let p of e)p.flatten(f);return new a(f,t)}let i=Math.max(32,n>>5),l=i<<1,r=i>>1,u=[],h=0,o=-1,c=[];function I(f){let p;if(f.lines>l&&f instanceof g)for(let F of f.children)I(F);else f.lines>r&&(h>r||!h)?(v(),u.push(f)):f instanceof a&&h&&(p=c[c.length-1])instanceof a&&f.lines+p.lines<=32?(h+=f.lines,o+=f.length+1,c[c.length-1]=new a(p.text.concat(f.text),p.length+1+f.length)):(h+f.lines>i&&v(),h+=f.lines,o+=f.length+1,c.push(f))}function v(){h!=0&&(u.push(c.length==1?c[0]:g.from(c,o)),o=-1,h=c.length=0)}for(let f of e)I(f);return v(),u.length==1?u[0]:new g(u,t)}};d.empty=new a([""],0);function P(s){let e=-1;for(let t of s)e+=t.length+1;return e}function w(s,e,t=0,n=1e9){for(let i=0,l=0,r=!0;l<s.length&&i<=n;l++){let u=s[l],h=i+u.length;h>=t&&(h>n&&(u=u.slice(0,n-i)),i<t&&(u=u.slice(t-i)),r?(e[e.length-1]+=u,r=!1):e.push(u)),i=h+1}return e}function E(s,e,t){return w(s,[""],e,t)}var x=class{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof a?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,i=this.nodes[n],l=this.offsets[n],r=l>>1,u=i instanceof a?i.text.length:i.children.length;if(r==(t>0?u:0)){if(n==0)return this.done=!0,this.value="",this;t>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((l&1)==(t>0?0:1)){if(this.offsets[n]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof a){let h=i.text[r+(t<0?-1:0)];if(this.offsets[n]+=t,h.length>Math.max(0,e))return this.value=e==0?h:t>0?h.slice(e):h.slice(0,h.length-e),this;e-=h.length}else{let h=i.children[r+(t<0?-1:0)];e>h.length?(e-=h.length,this.offsets[n]+=t):(t<0&&this.offsets[n]--,this.nodes.push(h),this.offsets.push(t>0?1:(h instanceof a?h.text.length:h.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}},C=class{constructor(e,t,n){this.value="",this.done=!1,this.cursor=new x(e,t>n?-1:1),this.pos=t>n?e.length:0,this.from=Math.min(t,n),this.to=Math.max(t,n)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let n=t<0?this.pos-this.from:this.to-this.pos;e>n&&(e=n),n-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*t,this.value=i.length<=n?i:t<0?i.slice(i.length-n):i.slice(0,n),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}},B=class{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:n,value:i}=this.inner.next(e);return t?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}};typeof Symbol!="undefined"&&(d.prototype[Symbol.iterator]=function(){return this.iter()},x.prototype[Symbol.iterator]=C.prototype[Symbol.iterator]=B.prototype[Symbol.iterator]=function(){return this});var R=class{constructor(e,t,n,i){this.from=e,this.to=t,this.number=n,this.text=i}get length(){return this.to-this.from}};export{R as Line,d as Text,b as codePointAt,q as codePointSize,J as countColumn,A as findClusterBreak,O as findColumn,z as fromCodePoint};
